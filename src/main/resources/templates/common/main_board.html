<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div class="col" th:fragment="board">
    <div th:replace="/common/search_section.html :: search_section"></div>

    <section class="article-list article-list--compact">

        <article class="article-list-item" th:each="post : ${post_list.getContent()}">
            <div class="article-list-item__content">
                <div class="article-list-item__vote">
                    <img src="https://economy-bucket.s3.ap-northeast-2.amazonaws.com/up.png">
                    <div th:text="${post.getLikeCount()}"></div>
                </div>
                <div class="article-list-item__info">
                    <a th:href="@{${'/post/' + post.getId()}}">
                        <div class="article-list-item__title">
                            <span class="post-title" th:text="${post.getTitle()}"></span>
                        </div>
                    </a>
                </div>
                <div class="article-list-item-meta">
                    <div class="article-list-item-meta__item article-list-item-meta__item--date">
                        <span>1</span>
                    </div>
                    <div class="article-list-item-meta__item article-list-item-meta__item--author">
                        <a href="#" th:text="${post.getUserDTO().getNickname()}"></a>
                    </div>
                </div>
            </div>
        </article>

    </section>

    <div class="page-navigation" th:object="${post_list}">
        <nav>
            <ul class="pagination justify-content-center"
                th:with="start=${T(Math).floor(post_list.number/10) * 10 + 1},
                last=(${start + 9 < post_list.totalPages ? start + 9 : post_list.totalPages})">

                <li class="page-item" th:classappend="${post_list.first} ? 'disabled' : ''">
                    <a class="page-link"
                       th:href="@{${'/board/'+type+'/'}(page=1,size=${post_list.size})}">처음</a>
                </li>

                <li class="page-item" th:classappend="${start}-10 < 1 ? 'disabled' :''">
                    <a aria-label="Previous" class="page-link"
                       th:href="@{${'/board/'+type+'/'}(page=${start}-10,size=${post_list.size})}">
                        <span aria-hidden="true">&larr;</span>
                    </a>
                </li>

                <li class="page_item active"
                    th:classappend="${page == post_list.number + 1} ? 'active' : ''"
                    th:each="page: ${#numbers.sequence(start, last)}">
                    <a class="page-link" th:href="@{${'/board/'+type+'/'}(page=${page},size=${post_list.size})}"
                       th:text="${page}">
                    </a>
                </li>

                <li class="page-item" th:classappend="${last}+1 > ${post_list.totalPages} ? 'disabled' :''">
                    <a aria-label="Previous" class="page-link"
                       th:href="@{${'/board/'+type+'/'}(page=${last}+1,size=${post_list.size})}">
                        <span aria-hidden="true">&rarr;</span>
                    </a>
                </li>

                <li class="page-item" th:classappend="${post_list.last} ? 'disabled' : ''">
                    <a class="page-link"
                       th:href="@{${'/board/'+type+'/'}(page=${post_list.totalPages},size=${post_list.size})}">끝</a>
                </li>
            </ul>
        </nav>
    </div>
</div>

</body>
</html>